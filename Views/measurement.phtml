<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Measurements</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="my-style.css">
</head>
<body>
<!-- dima if u looking at this measurement page what i need u do is make sure user can only allow to access this page after they loggin-->
<!-- check the my measurement.php if u ever need it-->
<!--额i don't write any comment in this page cuz im lazy if any one looking this page just throw this to AI pls-->
<?php require ("Views/template/header.phtml");?>

<div class="measurement-container">
    <div class="top-header-info">
        <div class="top-progress">
            <div class="progress-segment-1of5" style="background-color: #4CAF50;"></div>
            <div class="progress-segment-1of5" style="background-color: #F44336;"></div>
            <div class="progress-segment-1of5" style="background-color: #F44336;"></div>
            <div class="progress-segment-1of5" style="background-color: #F44336;"></div>
            <div class="progress-segment-1of5" style="background-color: #F44336;"></div>
        </div>
        <!--this part of measurement had issue with moblie users i don't know how to fix it even with gpd -->
        <!--fixed the aligment issue in moblie if u could otherwise told moblie users fuck themself-->
        <div class="d-flex justify-content-between p-2 pt-0 w-100" style="color: #444; font-size: 0.9rem;">
            <span>Measurements</span>
            <span>Page 1 of 5</span>
        </div>
    </div>

    <div class="container">
        <div class="toggle-unit d-flex justify-content-center align-items-center mb-4">
            <span>feet</span>
            <div class="form-check form-switch mx-3">
                <input class="form-check-input" type="checkbox" role="switch" id="unitToggle" checked>
                <label class="unit-toggle-switch" for="unitToggle"></label>
            </div>
            <span>metres</span>
        </div>

        <div class="input-layout-wrapper mx-auto" style="max-width: 600px;">
            <div class="row justify-content-center g-3">
                <div class="col-12 col-md-6 custom-input-box text-start">
                    <label for="inputLength" class="form-label d-block fw-bold" style="color: #0b0f3a;">Length:</label>
                    <input type="text" class="form-control" id="inputLength" placeholder="">
                </div>

                <div class="col-12 col-md-6 custom-input-box text-start">
                    <label for="inputWidth" class="form-label d-block fw-bold" style="color: #0b0f3a;">Width:</label>
                    <input type="text" class="form-control" id="inputWidth" placeholder="">
                </div>
            </div>
        </div>

        <div class="d-grid gap-2 col-6 mx-auto my-4">
            <button class="btn btn-primary fw-bold" type="button" id="calculateBtn">
                Calculate Area
            </button>
        </div>

        <div class="calc-value text-center fw-bold fs-5 text-success" id="calculatedAreaDisplay">
            &lt;Calculated Value&gt; m²/ft²
        </div>
    </div>

    <div class="d-flex justify-content-between w-100 position-fixed bottom-0 p-3 bg-white border-top">
        <a href="#" class="text-decoration-none fw-bold" style="color: #0b0f3a;">&lt;- Previous</a>

        <div class="page-indicator d-flex align-items-center">
            <div class="dot active"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>

        <a href="page2.php" class="text-decoration-none fw-bold" style="color: #0b0f3a;">Next -&gt;</a>
    </div>
</div>

<?php require ("Views/template/footer.phtml");?>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.getElementById('calculateBtn').addEventListener('click', function() {
        const lengthInput = document.getElementById('inputLength');
        const widthInput = document.getElementById('inputWidth');
        const unitToggle = document.getElementById('unitToggle');
        const display = document.getElementById('calculatedAreaDisplay');

        const length = parseFloat(lengthInput.value);
        const width = parseFloat(widthInput.value);
        // 如果开关被选中（checked），则使用 metres，否则使用 feet
        const isMetres = unitToggle.checked;

        if (isNaN(length) || isNaN(width) || length <= 0 || width <= 0) {
            display.textContent = "Error: Please enter valid, positive Length and Width values.";
            display.classList.remove('text-success');
            display.classList.add('text-danger');
            return;
        }

        const area = length * width;
        const unit = isMetres ? 'm²' : 'ft²';

        display.textContent = `Calculated Area: ${area.toFixed(2)} ${unit}`;
        display.classList.remove('text-danger');
        display.classList.add('text-success');

        // TODO: 在实际项目中，您需要使用 AJAX 将这些数据发送到 measurement.php 控制器进行复杂的计算。
        // 示例：
        /*
        fetch('measurement.php', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                room_length: length,
                room_width: width,
                unit: isMetres ? 'metres' : 'feet',
                // ... 其他数据如瓷砖尺寸
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                display.textContent = `Room Area: ${data.room_area_m2} m²`;
                // ... 显示更多结果
            } else {
                display.textContent = `Calculation Error: ${data.message}`;
            }
        })
        .catch(error => {
            console.error('Fetch error:', error);
            display.textContent = 'Network or system error during calculation.';
        });
        */
    });

    // 简单地更新单位，并重新计算（保持显示结果与当前单位一致）
    document.getElementById('unitToggle').addEventListener('change', function() {
        // 自动触发计算以更新单位和数值
        document.getElementById('calculateBtn').click();
    });
</script>
</body>
</html>